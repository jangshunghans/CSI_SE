<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>127-03-06</title>
    <style>
        body {
            font-family: 'Malgun Gothic', '맑은 고딕', Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        p {
            margin: 10px 0;
        }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 20px 0;
        }
        table, th, td {
            border: 2px solid #999;
        }
        th, td {
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
        }
                table tr td:first-child,
        table tr td:nth-child(2) {
            text-align: center;
        }
        table tr:first-child td:nth-child(3),
        table tr th:nth-child(3) {
            text-align: center;
        }
        table tr:not(:first-child) td:nth-child(3) {
            text-align: left;
        }

        .btn-wrap {
            margin: 16px 0;
        }
        .btn-wrap button {
            font-family: 'Malgun Gothic', '맑은 고딕', Arial, sans-serif;
            padding: 8px 20px;
            margin-right: 10px;
            font-size: 14px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #f5f5f5;
            color: #333;
            cursor: pointer;
        }
        .btn-wrap button:hover {
            background: #e8e8e8;
        }
        .btn-wrap button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        #editableArea[contenteditable="true"] {
            outline: 1px dashed #4a90d9;
            padding: 4px;
            min-height: 100px;
        }
    </style>
</head>
<body>
<div class="btn-wrap">
    <button type="button" id="btnEdit">수정</button>
    <button type="button" id="btnSave" disabled>저장</button>
</div>
<div id="editableArea" contenteditable="false">
<p>[127-03-06] 건설현장의 돌관작업을 위한 계획 수립시 재해예방을 위한</p>
<p>고려사항과 돌관작업현장의 안전관리방안을 설명하시오.</p>
<table>
<tr>
<td>구분</td>
<td>세부 항목</td>
<td>주요 내용</td>
</tr>
<tr>
<td rowspan="2">돌관작업 
개요</td>
<td>정의</td>
<td>당초 공기를 맞추기 위해 인력·장비 추가, 
교대·야간근무 등 근무시간을 연장하여 수행하는 작업</td>
</tr>
<tr>
<td>목적</td>
<td>공사목적물 기한 내 완성</td>
</tr>
<tr>
<td rowspan="5">돌관작업계획 
고려사항</td>
<td>근로자 
관리계획</td>
<td>법정 근로시간 준수, 교대편성으로 휴식 확보, 
공종 간 간섭 최소 공정계획, 추가투입 인력 대비책, 
야간 식별용 야광·반사조끼 지급·착용, 
야간 휴게시설 설치</td>
</tr>
<tr>
<td>장비 
관리계획</td>
<td>동시투입 적정 장비수량 산출, 반입 전·정기점검 계획, 
장비 동선 간섭 방지, 신호수·유도자 배치, 
야간 가설도로 조명·점멸등 설치, 
안전표지판 위치·조명 계획, 
장비 경광등·반사테이프 부착</td>
</tr>
<tr>
<td>가설구조물
·안전시설물 계획</td>
<td>공사물량 증가에 따른 가설재·안전시설물 수급, 
비계·거푸집동바리 구조검토 및 조립도 사전 작성·교육, 
야간 차량충돌 방지계획, 야간 작업발판 끝단 식별계획</td>
</tr>
<tr>
<td>안전보건 
관리계획</td>
<td>일일·주간 단위 공종 간 영향 포함 
위험성평가 계획, 매일 작업 전 
툴박스 미팅(Tool Box Meeting)·위험예지활동
·안전시설 점검 계획, 안전통로 설치, 
자재 반입·야적장 포함 정리정돈 계획</td>
</tr>
<tr>
<td>조명시설 
계획</td>
<td>이동통로·가설도로 조명계획, 
정전 시 전력 복구·공급계획</td>
</tr>
<tr>
<td rowspan="5">돌관작업 시 
안전관리방안</td>
<td>근로자 관리</td>
<td>무단출입 방지, 개인별 작업시간 기록(과로 예방), 
공종·교대조 식별용 작업복·안전모 색상 구분, 
미숙련자 단독작업 금지, 신규채용자 안전교육, 충
분한 휴게시설 확보, 야간작업 보고체계·반사물 점검
·방한복 착용·임의 화기 금지·소화기/
비상조명/전원스위치 위치 주지</td>
</tr>
<tr>
<td>작업 관리</td>
<td>동시작업 위험 최소화, 근로자·장비 동선 분리, 
소화기 충분히 비치·표지, 
공종 간 신호체계 확립·교육, 
야간작업일지 작성·인계철저, 
작업장 조도 75 lx 이상 유지, 개구부 주변 추가조명, 
단독작업 지양·2인1조, 비상전원·비상조명 정상 여부 확인</td>
</tr>
<tr>
<td>가설재
·안전시설물 관리</td>
<td>불량 가설재 반입 차단, 비계 조립도 기반 설치·특별교육, 
거푸집동바리 구조검토·조립도 작성·준수 확인, 
야간 충돌방지 반사표지 부착, 작업발판·단부 반사테이프 부착, 
고위험 구간 조명 강화</td>
</tr>
<tr>
<td>건설장비
·기계기구 
관리</td>
<td>미인가 장비 반입 금지, 장비 일일점검, 
작업·이동 시 신호수 유도, 전조등·후진경고 정상 확인, 
야간 운전원 과로·건강 확인, 장비 전조등·경광등으로 
식별성 확보, 전동기계·기구 반입 시 
안전장치·절연 점검 및 필증 부착, 무점검 기계 사용 금지, 
동시작업 전력수요 고려 가설전기 용량 증설, 
분전함 주변 조명 확보</td>
</tr>
<tr>
<td>근로자 
건강관리</td>
<td>야간 휴게시간 준수 확인, 
수시 휴식 가능한 간이 휴게시설 확보, 
작업 전 건강·피로도 확인 후 투입, 혈압·혈당 등 
간이검진장비·비상약품 비치, 
정기 건강검진 실시 및 이상자 위험작업 배제</td>
</tr>
<tr>
<td>결론</td>
<td>야간작업 
안전원칙</td>
<td>야간은 대뇌활동 저하로 재해 위험 증가 
→ 주간 이상 수준의 작업환경 개선과 안전행동 준수로 
근원적 안전성 확보 필요</td>
</tr>
<tr>
<td colspan="3"></td>
</tr>

</table>
</div>
<script>
(function() {
    var btnEdit = document.getElementById('btnEdit');
    var btnSave = document.getElementById('btnSave');
    var area = document.getElementById('editableArea');
    var pathname = location.pathname || '';
    var filename = pathname.split('/').filter(Boolean).pop() || (document.title || 'document').trim() + '.html';
    if (!/\.html$/i.test(filename)) filename = filename + '.html';

var autoSaveTimer = null;
    var AUTO_SAVE_DELAY_MS = 2000;

    function showToast(msg) {
        var t = document.getElementById('docLoadToast');
        if (t) t.remove();
        t = document.createElement('div');
        t.id = 'docLoadToast';
        t.textContent = msg;
        t.style.cssText = 'position:fixed;bottom:20px;right:20px;padding:10px 16px;background:#333;color:#fff;border-radius:8px;font-size:13px;z-index:9999;box-shadow:0 2px 8px rgba(0,0,0,0.2);';
        document.body.appendChild(t);
        setTimeout(function() { if (t.parentNode) t.remove(); }, 2500);
    }

    function scheduleAutoSave() {
        if (autoSaveTimer) clearTimeout(autoSaveTimer);
        autoSaveTimer = setTimeout(function() {
            autoSaveTimer = null;
            var html = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;
            var baseUrl = location.origin + ((location.pathname || '').split('/doc_load')[0] || '');
            if (baseUrl.endsWith('/')) baseUrl = baseUrl.slice(0, -1);
            fetch(baseUrl + '/save', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ filename: filename, content: html })
            }).then(function(r) { return r.json().then(function(d) { return { ok: r.ok, data: d }; }).catch(function() { return { ok: false, data: null }; }); })
              .then(function(result) {
                  if (result.ok && result.data && result.data.ok) showToast('자동 저장됨');
                  else showToast('자동 저장 불가 (서버에서 열어 주세요)');
              })
              .catch(function() { showToast('자동 저장 불가 (서버 연결 필요)'); });
        }, AUTO_SAVE_DELAY_MS);
    }

    function onEditInput() { scheduleAutoSave(); }

    btnEdit.addEventListener('click', function() {
        area.setAttribute('contenteditable', 'true');
        area.focus();
        btnEdit.disabled = true;
        btnSave.disabled = false;
        area.addEventListener('input', onEditInput);
        area.addEventListener('keyup', onEditInput);
    });

    btnSave.addEventListener('click', function() {
        area.removeEventListener('input', onEditInput);
        area.removeEventListener('keyup', onEditInput);
        area.setAttribute('contenteditable', 'false');
        btnEdit.disabled = false;
        btnSave.disabled = true;
        var html = '<!DOCTYPE html>\n' + document.documentElement.outerHTML;

        function doRefresh() { location.reload(); }

        var baseUrl = location.origin + ((location.pathname || '').split('/doc_load')[0] || '');
        if (baseUrl.endsWith('/')) baseUrl = baseUrl.slice(0, -1);
        fetch(baseUrl + '/save', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ filename: filename, content: html })
        }).then(function(r) { return r.json().then(function(d) { return { ok: r.ok, data: d }; }).catch(function() { return { ok: false, data: null }; }); })
          .then(function(result) {
              if (result.ok && result.data && result.data.ok) { showToast('저장되었습니다.'); doRefresh(); }
              else { showToast('서버에 저장할 수 없습니다. Replit 또는 Node 서버 주소에서 열어 주세요.'); btnSave.disabled = false; }
          })
          .catch(function() { showToast('서버에 저장할 수 없습니다. Replit 또는 Node 서버 주소에서 열어 주세요.'); btnSave.disabled = false; });
    });
})();
</script>

</body>
</html>